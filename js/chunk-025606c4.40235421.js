(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-025606c4"],{"4b52":function(t,e,n){"use strict";n("e71f")},8845:function(t,e,n){"use strict";var s=n("b132");e["a"]={getFollowings:function(t){return s["b"].get("/users/".concat(t,"/followings"))},getFollowers:function(t){return s["b"].get("/users/".concat(t,"/followers"))},getTopFollow:function(){return s["b"].get("/followships/top")},addFollow:function(t){return s["b"].post("/followships",{id:t})},cancelFollow:function(t){return s["b"].delete("/followships/".concat(t))}}},b9da:function(t,e,n){},bece:function(t,e,n){"use strict";n("b9da")},d81d:function(t,e,n){"use strict";var s=n("23e7"),r=n("b727").map,o=n("1dde"),a=o("map");s({target:"Array",proto:!0,forced:!a},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e71f:function(t,e,n){},f4ef:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"twitter-container"},[n("router-view"),n("Top")],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"top-container"},[n("main",{staticClass:"top"},[t._m(0),t._l(t.tops,(function(e){return n("div",{key:e.id,staticClass:"top__user"},[n("router-link",{attrs:{to:"/home/"+e.id}},[n("div",{staticClass:"top__user-avatar"},[n("img",{staticClass:"top__user-avatar--img",attrs:{src:e.avatar}})])]),n("div",{staticClass:"top__user-info"},[n("div",[n("router-link",{attrs:{to:"/home/"+e.id}},[n("p",{staticClass:"top__user-info--name"},[t._v(" "+t._s(e.name)+" ")])]),n("router-link",{attrs:{to:"/home/"+e.id}},[n("p",{staticClass:"top__user-info--account"},[t._v(" @"+t._s(e.account)+" ")])])],1),e.id!==t.currentUser.id?n("button",{staticClass:"top__user-info--follow",class:{active:e.isFollowing,disabled:e.isProcessing},attrs:{disabled:e.isProcessing},on:{click:function(n){n.stopPropagation(),n.preventDefault(),e.isFollowing?t.cancelFollow(e.id):t.addFollow(e.id)}}},[t._v(" "+t._s(e.isFollowing?"正在跟隨":"跟隨")+" ")]):t._e()])],1)}))],2)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"top__header"},[n("p",{staticClass:"top__header-title"},[t._v("Popular")])])}],c=n("1da1"),i=n("5530"),l=(n("96cf"),n("d81d"),n("b0c0"),n("b132")),u=n("8845"),p=n("2f62"),f={name:"Top",data:function(){return{tops:[]}},computed:Object(i["a"])({},Object(p["b"])(["currentUser"])),methods:{fetchTops:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].getTopFollow();case 3:n=e.sent,s=n.data,t.tops=s.results.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{name:t.name||"NoName",avatar:t.avatar||"https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg",isProcessing:!1})})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),l["a"].fire({icon:"error",title:"無法讀取到熱門使用者資訊，請稍後再試"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},toggleProcessing:function(t){this.tops=this.tops.map((function(e){return e.id===t?Object(i["a"])(Object(i["a"])({},e),{},{isProcessing:!e.isProcessing}):Object(i["a"])({},e)}))},addFollow:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.toggleProcessing(t),n.next=4,u["a"].addFollow(t);case 4:if(s=n.sent,r=s.data,"success"===r.status){n.next=8;break}throw new Error(r.message);case 8:e.tops=e.tops.map((function(e){return e.id===t?Object(i["a"])(Object(i["a"])({},e),{},{isFollowing:!0,isProcessing:!e.isProcessing}):Object(i["a"])({},e)})),l["a"].fire({icon:"success",title:"跟隨成功！"}),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](0),e.toggleProcessing(t),l["a"].fire({icon:"error",title:"無法跟隨或取消跟隨該使用者，請稍後再試"});case 16:case"end":return n.stop()}}),n,null,[[0,12]])})))()},cancelFollow:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.toggleProcessing(t),n.next=4,u["a"].cancelFollow(t);case 4:s=n.sent,r=s.data,e.tops=e.tops.map((function(e){return e.id===t?Object(i["a"])(Object(i["a"])({},e),{},{isFollowing:!1,isProcessing:!e.isProcessing}):Object(i["a"])({},e)})),l["a"].fire({icon:"success",title:"".concat(r.message,"!")}),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](0),e.toggleProcessing(t),l["a"].fire({icon:"error",title:"無法跟隨或取消跟隨該使用者，請稍後再試"});case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()}},created:function(){this.fetchTops()}},d=f,g=(n("bece"),n("2877")),b=Object(g["a"])(d,o,a,!1,null,null,null),w=b.exports,m={components:{Top:w}},v=m,h=(n("4b52"),Object(g["a"])(v,s,r,!1,null,null,null));e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-025606c4.40235421.js.map