(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d731e4c"],{"102e":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"follow"},[o("router-link",{staticClass:"follow__avatar",attrs:{to:"/home/"+t.follow.followingId}},[o("img",{staticClass:"follow__avatar--img",attrs:{src:t.follow.avatar||"https://i.pinimg.com/originals/1f/7c/70/1f7c70f9b5b5f0e1972a4888468ed84c.jpg",alt:"avatar","aria-label":"avatar"}})]),o("div",{staticClass:"follow__info"},[o("div",{staticClass:"follow__info-followship"},[o("router-link",{attrs:{to:"/home/"+t.follow.followingId}},[o("p",{staticClass:"name"},[t._v(t._s(t.follow.name||"NoName"))]),o("p",{staticClass:"account"},[t._v("@"+t._s(t.follow.account))])])],1),o("p",{staticClass:"follow__info-description"},[t._v(" "+t._s(t.follow.introduction||"（作者目前還沒有自我介紹內容）")+" ")])]),o("button",{class:{active:t.follow.isFollowing},attrs:{disabled:t.currentUser.id===t.follow.followingId||t.currentUser.id===t.follow.followerId},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleFollow(t.follow.followingId||t.follow.followerId,t.follow.isFollowing)}}},[t._v(" "+t._s(t.follow.isFollowing?"正在跟隨":"跟隨")+" ")])],1)},r=[],l=o("1da1"),i=o("5530"),a=(o("96cf"),o("2f62")),s=o("b132"),c=o("8845"),f={name:"Followship",props:{initialFollow:{type:Object,required:!0}},data:function(){return{follow:{followingId:20,account:"user2",name:"user2",avatar:null,introduction:null,isFollowing:!1}}},created:function(){this.fetchFollow()},computed:Object(i["a"])({},Object(a["b"])(["currentUser"])),methods:{fetchFollow:function(){this.follow=Object(i["a"])({},this.initialFollow)},toggleFollow:function(t,e){var o=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,l,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!e){n.next=12;break}return n.next=4,c["a"].cancelFollow(t);case 4:if(r=n.sent,l=r.data,"error"!==l.status){n.next=8;break}throw new Error(l.message);case 8:o.follow.isFollowing=!1,s["a"].fire({icon:"success",title:"成功取消追隨"}),n.next=20;break;case 12:return n.next=14,c["a"].addFollow(t);case 14:if(i=n.sent,a=i.data,"error"!==a.status){n.next=18;break}throw new Error(a.message);case 18:o.follow.isFollowing=!0,s["a"].fire({icon:"success",title:"成功加入追隨"});case 20:n.next=25;break;case 22:n.prev=22,n.t0=n["catch"](0),s["a"].fire({icon:"error",title:"無法修改追隨狀態"});case 25:case"end":return n.stop()}}),n,null,[[0,22]])})))()}},watch:{initialFollow:function(t){this.follow=Object(i["a"])(Object(i["a"])({},this.follow),t)}}},u=f,w=(o("9760"),o("2877")),d=Object(w["a"])(u,n,r,!1,null,null,null);e["a"]=d.exports},2375:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"spinner"},[o("div",{staticClass:"bouncing-loader"},[o("div"),o("div"),o("div")])])}],l=(o("d0b5"),o("2877")),i={},a=Object(l["a"])(i,n,r,!1,null,"03284d6c",null);e["a"]=a.exports},"703e":function(t,e,o){},8845:function(t,e,o){"use strict";var n=o("b132");e["a"]={getFollowings:function(t){return n["b"].get("/users/".concat(t,"/followings"))},getFollowers:function(t){return n["b"].get("/users/".concat(t,"/followers"))},getTopFollow:function(){return n["b"].get("/followships/top")},addFollow:function(t){return n["b"].post("/followships",{id:t})},cancelFollow:function(t){return n["b"].delete("/followships/".concat(t))}}},9760:function(t,e,o){"use strict";o("f395")},a7b2:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"followings-container"},[o("header",{staticClass:"followings__header"},[o("div",{staticClass:"followings__header__title"},[o("svg",{attrs:{width:"23",height:"24",viewBox:"0 0 23 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.$router.back()}}},[o("path",{attrs:{d:"M18.9995 10.9999H6.4135L10.7065 6.70687C11.0965 6.31687 11.0965 5.68388 10.7065 5.29288C10.3165 4.90188 9.6835 4.90288 9.2925 5.29288L3.2925 11.2929C2.9025 11.6829 2.9025 12.3159 3.2925 12.7069L9.2925 18.7069C9.4875 18.9019 9.7425 18.9999 9.9995 18.9999C10.2565 18.9999 10.5115 18.9019 10.7065 18.7069C11.0965 18.3169 11.0965 17.6839 10.7065 17.2929L6.4135 12.9999H18.9995C19.5525 12.9999 19.9995 12.5529 19.9995 11.9999C19.9995 11.4469 19.5525 10.9999 18.9995 10.9999Z",fill:"black"}})]),o("div",{staticClass:"followings__header__title__wrapper"},[o("p",{staticClass:"name"},[t._v(t._s(t.profile.name))]),o("p",{staticClass:"tweetCounts"},[t._v(t._s(t.profile.tweetCounts)+" 推文")])])])]),o("div",{staticClass:"main__follow__tabs"},[o("router-link",{staticClass:"main__follow__tabs--link",attrs:{to:"/home/"+t.profile.id+"/followers"}},[o("p",[t._v("跟隨者")])]),o("router-link",{staticClass:"main__follow__tabs--link",attrs:{to:"/home/"+t.profile.id+"/followings"}},[o("p",[t._v("正在跟隨")])])],1),t._l(t.followings,(function(t){return o("Followship",{key:t.followingId,attrs:{initialFollow:t}})})),t.isLoading?o("Spinner"):t._e()],2)},r=[],l=o("5530"),i=o("1da1"),a=(o("96cf"),o("d81d"),o("b132")),s=o("4cce"),c=o("102e"),f=o("8845"),u=o("2375"),w={name:"Followings",components:{Followship:c["a"],Spinner:u["a"]},data:function(){return{followings:[],profile:{id:0,name:"user1",tweetCounts:0}}},created:function(){var t=this.$route.params.userId;this.fetchFollowings(t),this.fetchProfile(t)},beforeRouteUpdate:function(t,e,o){var n=t.params.userId;this.fetchFollowings(n),this.fetchProfile(n),o()},methods:{fetchFollowings:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var n,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,e.isProcessing=!0,e.isLoading=!0,o.next=5,f["a"].getFollowings(t);case 5:if(n=o.sent,r=n.data,"error"!==r.status){o.next=9;break}throw new Error(r.message);case 9:e.followings=r.map((function(t){return Object(l["a"])({},t)})),e.isLoading=!1,o.next=17;break;case 13:o.prev=13,o.t0=o["catch"](0),e.isLoading=!1,a["a"].fire({icon:"error",title:"無法獲取追隨中資料，請稍後再嘗試"});case 17:case"end":return o.stop()}}),o,null,[[0,13]])})))()},fetchProfile:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var n,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,e.isProcessing=!0,e.isLoading=!0,o.next=5,s["a"].getUserProfile(t);case 5:if(n=o.sent,r=n.data,"error"!==r.status){o.next=9;break}throw new Error(r.message);case 9:e.profile=Object(l["a"])({},r),e.isLoading=!1,o.next=17;break;case 13:o.prev=13,o.t0=o["catch"](0),e.isLoading=!1,a["a"].fire({icon:"error",title:"無法獲取個人資料，請稍後再嘗試"});case 17:case"end":return o.stop()}}),o,null,[[0,13]])})))()}}},d=w,p=(o("c6f9"),o("2877")),g=Object(p["a"])(d,n,r,!1,null,null,null);e["default"]=g.exports},c6f9:function(t,e,o){"use strict";o("d906")},d0b5:function(t,e,o){"use strict";o("703e")},d81d:function(t,e,o){"use strict";var n=o("23e7"),r=o("b727").map,l=o("1dde"),i=l("map");n({target:"Array",proto:!0,forced:!i},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},d906:function(t,e,o){},f395:function(t,e,o){}}]);
//# sourceMappingURL=chunk-9d731e4c.a7fe2073.js.map