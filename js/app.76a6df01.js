(function(e){function t(t){for(var r,a,i=t[0],c=t[1],u=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o={app:0},s=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-025606c4":"40235421","chunk-038f7643":"5b977c3c","chunk-0e47ae0a":"11105a12","chunk-1563850b":"e980ddf8","chunk-3182d548":"a07c9cdc","chunk-4407303c":"af1f2c6a","chunk-649b03a8":"ef121449","chunk-75a76a83":"3d66663c","chunk-795e0886":"fe9c2801","chunk-951ebeac":"3add23a1","chunk-9d731e4c":"a7fe2073","chunk-a15f7616":"0a07ee0f","chunk-d80c2278":"8b81b774","chunk-db4e00d6":"c684ddb3"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-025606c4":1,"chunk-038f7643":1,"chunk-0e47ae0a":1,"chunk-1563850b":1,"chunk-3182d548":1,"chunk-4407303c":1,"chunk-649b03a8":1,"chunk-75a76a83":1,"chunk-795e0886":1,"chunk-951ebeac":1,"chunk-9d731e4c":1,"chunk-a15f7616":1,"chunk-d80c2278":1,"chunk-db4e00d6":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-025606c4":"e8c8bf4d","chunk-038f7643":"1be2e766","chunk-0e47ae0a":"12966082","chunk-1563850b":"ac339c31","chunk-3182d548":"0e864fad","chunk-4407303c":"957d3501","chunk-649b03a8":"9ba371f4","chunk-75a76a83":"e0659457","chunk-795e0886":"1a77d32f","chunk-951ebeac":"12966082","chunk-9d731e4c":"bf98b9ef","chunk-a15f7616":"bc181073","chunk-d80c2278":"8bd08e42","chunk-db4e00d6":"f952f283"}[e]+".css",o=c.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],f.parentNode.removeChild(f),n(s)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/tweet-front-2021/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"4cce":function(e,t,n){"use strict";var r=n("b132");t["a"]={getUserProfile:function(e){return r["b"].get("/users/".concat(e))},getUserProfileTweets:function(e){return r["b"].get("/users/".concat(e,"/tweets"))},getUserProfileReplies:function(e){return r["b"].get("/users/".concat(e,"/replied_tweets"))},getUserProfileLikes:function(e){return r["b"].get("/users/".concat(e,"/likes"))},putUserEdit:function(e,t){return r["b"].put("/users/".concat(e),t)}}},"54e2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"signin-container"},[n("div",{staticClass:"signin"},[n("header",{staticClass:"signin__header"},[n("div",{staticClass:"signin__header-logo"},[n("svg",{attrs:{width:"50",height:"50",viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M30.6996 23.4709C30.6996 23.4709 23.2328 35.5781 17.1109 35.5781C6.40314 35.5781 16.3821 12.5132 24.1916 12.5132C29.641 12.5132 30.6996 23.4709 30.6996 23.4709Z",fill:"#FF6600"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M39.5723 38.6972C37.4451 40.9607 34.8198 42.6976 31.9044 43.7701C28.989 44.8426 25.8639 45.2213 22.7767 44.8761C19.6895 44.5309 16.7252 43.4713 14.1188 41.7813C11.5125 40.0914 9.33573 37.8175 7.76123 35.1401C9.5314 37.5477 12.5338 39.1527 16.803 39.1527C27.3199 39.1527 33.2899 30.98 33.2899 30.98C33.2899 30.98 33.8062 37.4392 39.5593 38.6972H39.5723Z",fill:"#FF6600"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M42.7223 15.7451C44.2963 18.7527 45.0781 22.1116 44.9939 25.505C44.9096 28.8984 43.9621 32.2144 42.2407 35.1401C40.8792 34.3764 39.8725 33.1082 39.4379 31.609L37.1558 24.7724L42.7223 15.7451Z",fill:"#FF6600"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.0031 5.01737C30.0185 5.01403 34.8513 6.89881 38.5398 10.2967L34.7521 16.4088C33.3811 12.843 30.5957 9.2729 25.1767 9.2729C14.0784 9.2729 5.85231 21.3888 5.85231 28.9846C5.84986 29.9669 5.97528 30.9454 6.22543 31.8953C5.11558 28.8725 4.75205 25.6265 5.16572 22.4331C5.57938 19.2398 6.75802 16.1934 8.60147 13.5531C10.4449 10.9127 12.8987 8.75634 15.7542 7.26726C18.6097 5.77818 21.7826 5.00039 25.0031 5V5.01737Z",fill:"#FF6600"}})])]),e.isBackLogin?n("p",{staticClass:"signin__header-title"},[e._v("後台登入")]):n("p",{staticClass:"signin__header-title"},[n("span",[e._v("登入")]),n("span",[e._v("Alphitter")])])]),n("form",{staticClass:"sign__form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[n("label",{staticClass:"sign__form-row"},[n("p",{staticClass:"sign__form-title"},[e._v("帳號")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.account,expression:"account",modifiers:{trim:!0}}],ref:"account",staticClass:"sign__form-input",attrs:{type:"text",required:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("p",{staticClass:"sign__form-error"},[e.accountError?n("span",{staticClass:"error"},[e._v("帳號不存在")]):e._e()])]),n("label",{staticClass:"sign__form-row"},[n("p",{staticClass:"sign__form-title"},[e._v("密碼")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password,expression:"password",modifiers:{trim:!0}}],ref:"password",staticClass:"sign__form-input",attrs:{type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("p",{staticClass:"sign__form-error"},[e.passwordError?n("span",{staticClass:"error"},[e._v("密碼錯誤")]):e._e()])]),n("button",{staticClass:"sign__form-submit active",class:{disabled:e.isProcessing},attrs:{type:"submit"}},[e._v(" "+e._s(e.isProcessing?"登入中...":"登入")+" ")])]),e.isBackLogin?n("div",{staticClass:"signin__btns"},[n("router-link",{staticClass:"signin__btns-link",attrs:{to:"/signin"}},[e._v("前台登入")])],1):n("div",{staticClass:"signin__btns"},[n("router-link",{staticClass:"signin__btns-link",attrs:{to:"/signup"}},[e._v("註冊Alphitter")]),n("span",[e._v("・")]),n("router-link",{staticClass:"signin__btns-link",attrs:{to:"/admin/signin"}},[e._v("後台登入")])],1)])])},a=[],o=n("1da1"),s=(n("caad"),n("2532"),n("96cf"),n("b132")),i=n("7696"),c={name:"SignIn",data:function(){return{account:"",password:"",accountError:!1,passwordError:!1,isBackLogin:!1,isProcessing:!1}},methods:{handleSubmit:function(){if(this.accountError=!1,this.passwordError=!1,this.$refs.account.style.borderColor="",this.$refs.password.style.borderColor="",!this.account)return s["a"].fire({icon:"warning",title:"請輸入帳號"}),this.$refs.account.focus(),void(this.$refs.account.style.borderColor="#fc5a5a");if(!this.password)return s["a"].fire({icon:"warning",title:"請輸入密碼"}),this.$refs.password.focus(),void(this.$refs.password.style.borderColor="#fc5a5a");if(this.isBackLogin){if("root"!==this.account)return s["a"].fire({icon:"error",title:"帳號不存在，請洽開發者"}),this.accountError=!0,this.$refs.account.focus(),void(this.$refs.account.style.borderColor="#fc5a5a")}else if("root"===this.account)return s["a"].fire({icon:"error",title:"密碼錯誤，請再試一次"}),this.passwordError=!0,this.$refs.password.focus(),void(this.$refs.password.style.borderColor="#fc5a5a");this.login()},login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isProcessing=!0,t.next=4,i["a"].signIn({account:e.account,password:e.password});case 4:if(n=t.sent,r=n.data,"success"===r.status){t.next=8;break}throw new Error(r.message);case 8:localStorage.setItem("token",r.token),localStorage.setItem("userId",r.user.id),e.$store.commit("setCurrentUser",r.user),s["a"].fire({icon:"success",title:"成功登入!"}),a=e.isBackLogin?"/admin/tweets":"/home",e.$router.push(a),t.next=22;break;case 16:t.prev=16,t.t0=t["catch"](0),e.isProcessing=!1,s["a"].fire({icon:"error",title:"".concat(t.t0.message)}),e.$refs.account.focus(),e.$refs.account.style.borderColor="#fc5a5a";case 22:case"end":return t.stop()}}),t,null,[[0,16]])})))()},checkLoginRoute:function(e){this.isBackLogin=e.includes("admin")}},created:function(){this.checkLoginRoute(this.$route.path)},mounted:function(){this.$refs.account.focus()}},u=c,l=(n("bff1"),n("2877")),d=Object(l["a"])(u,r,a,!1,null,null,null);t["default"]=d.exports},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view",{key:e.$route.path})],1)},o=[],s=n("2877"),i={},c=Object(s["a"])(i,a,o,!1,null,null,null),u=c.exports,l=n("1da1"),d=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("25f0"),n("caad"),n("b0c0"),n("2532"),n("8c4f")),f=n("54e2"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mainbox"},[n("div",{staticClass:"err"},[e._v("4")]),n("i",{staticClass:"far fa-question-circle fa-spin"}),n("div",{staticClass:"err2"},[e._v("4")]),n("div",{staticClass:"msg"},[e._v(" 這是個不存在的頁面唷 "),n("p",{staticClass:"not-found-link",on:{click:function(t){return e.$router.back()}}},[e._v("回上一頁吧")])])])},h=[],m=(n("6fb9"),{}),b=Object(s["a"])(m,p,h,!1,null,null,null),g=b.exports,v=n("53ca"),k=n("5530"),w=(n("a4d3"),n("e01a"),n("7db0"),n("2f62")),_=n("4cce"),C=n("be6c");r["a"].use(w["a"]);var y=new w["a"].Store({state:{currentUser:{id:"",account:"",name:"",email:"",avatar:"",cover:"",introduction:"",role:""},isAuthenticated:!1,token:"",tweet:"",reply:"",modal:"",fromReplies:{}},mutations:{setCurrentUser:function(e,t){e.currentUser=Object(k["a"])(Object(k["a"])({},e.currentUser),t),e.isAuthenticated=!0,e.token=localStorage.getItem("token")},revokeAuthentication:function(e){e.currentUser={id:"",account:"",name:"",email:"",avatar:"",cover:"",introduction:"",role:""},e.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("userId"),e.token=""},recordText:function(e,t){e[t.action]=t.text},toggleModal:function(e,t){if("string"===typeof t)e.modal=t;else{var n=t.id,r=t.description,a=t.createdAt,o=t.User,s=t.reply;e.modal=s,e.fromReplies={id:n,description:r,createdAt:a,User:o}}},clearModal:function(e){"object"===("undefined"===typeof payload?"undefined":Object(v["a"])(payload))&&(e.fromReplies={}),e.modal=""}},actions:{fetchCurrentUser:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,i,c,u,l,d,f,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,r=localStorage.getItem("userId"),t.next=5,_["a"].getUserProfile(r);case 5:return a=t.sent,o=a.data,s=o.id,i=o.account,c=o.name,u=o.email,l=o.avatar,d=o.cover,f=o.introduction,p=o.role,n("setCurrentUser",{id:s,account:i,name:c,email:u,avatar:l,cover:d,introduction:f,role:p}),t.abrupt("return",!0);case 12:return t.prev=12,t.t0=t["catch"](1),console.error("無法取得現在使用者資訊"),n("revokeAuthentication"),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))()},fetchRootUser:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.commit,t.prev=1,t.next=4,C["a"].getUsers();case 4:return a=t.sent,o=a.data,s=o.find((function(e){return e.id===n.currentUser.id})),r("setCurrentUser",s),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t["catch"](1),console.error("無法取得現在使用者資訊"),r("revokeAuthentication"),t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},modules:{}});r["a"].use(d["a"]);var x=function(e,t,n){var r=y.state.currentUser;r&&"admin"!==r.role?n({path:"/404",replace:!0}):n()},U=function(e,t,n){var r=y.state.currentUser;r&&"user"!==r.role?n({path:"/404",replace:!0}):n()},E=[{path:"/",redirect:"/signin"},{path:"/signin",name:"sign-in",component:f["default"]},{path:"/signup",name:"sign-up",component:function(){return n.e("chunk-3182d548").then(n.bind(null,"5c9c"))}},{path:"/home",component:function(){return n.e("chunk-795e0886").then(n.bind(null,"cd56"))},children:[{path:"",component:function(){return n.e("chunk-025606c4").then(n.bind(null,"f4ef"))},children:[{path:"",name:"home",component:function(){return n.e("chunk-649b03a8").then(n.bind(null,"7d7e"))},beforeEnter:U},{path:"tweets/:tweetId",name:"replies",component:function(){return n.e("chunk-4407303c").then(n.bind(null,"b7bd"))},beforeEnter:U},{path:":userId/followers",name:"followers",component:function(){return n.e("chunk-038f7643").then(n.bind(null,"d13f"))},beforeEnter:U},{path:":userId/followings",name:"followings",component:function(){return n.e("chunk-9d731e4c").then(n.bind(null,"a7b2"))},beforeEnter:U},{path:":userId",name:"profile",redirect:":userId/tweets",component:function(){return n.e("chunk-d80c2278").then(n.bind(null,"4a39"))},children:[{path:"tweets",name:"profile-tweets",component:function(){return n.e("chunk-0e47ae0a").then(n.bind(null,"8c0e"))},beforeEnter:U},{path:"replies",name:"profile-replies",component:function(){return n.e("chunk-75a76a83").then(n.bind(null,"4c6b"))},beforeEnter:U},{path:"likes",name:"profile-likes",component:function(){return n.e("chunk-951ebeac").then(n.bind(null,"a2d3"))},beforeEnter:U}]}]},{path:":userId/setting",name:"setting",component:function(){return n.e("chunk-db4e00d6").then(n.bind(null,"4ef5"))},beforeEnter:U},{path:"/admin/tweets",name:"admin-tweets",component:function(){return n.e("chunk-a15f7616").then(n.bind(null,"fa6a"))},beforeEnter:x},{path:"/admin/users",name:"admin-users",component:function(){return n.e("chunk-1563850b").then(n.bind(null,"6135"))},beforeEnter:x}]},{path:"/admin/signin",name:"admin-sign-in",component:function(){return Promise.resolve().then(n.bind(null,"54e2"))}},{path:"*",name:"not-found",component:g}],P=new d["a"]({routes:E});P.beforeEach(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,s,i,c,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token"),o=y.state.token,s=localStorage.getItem("userId"),i=y.state.currentUser.id.toString(),c=y.state.isAuthenticated,u=a!==o,l=s!==i,!a||!u){e.next=18;break}if("admin"!==y.state.currentUser.role){e.next=14;break}return e.next=11,y.dispatch("fetchRootUser");case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,y.dispatch("fetchCurrentUser");case 16:e.t0=e.sent;case 17:c=e.t0;case 18:if(!a||!l){e.next=29;break}if("admin"!==y.state.currentUser.role){e.next=25;break}return e.next=22,y.dispatch("fetchRootUser");case 22:e.t1=e.sent,e.next=28;break;case 25:return e.next=27,y.dispatch("fetchCurrentUser");case 27:e.t1=e.sent;case 28:c=e.t1;case 29:if(d=["sign-in","sign-up","admin-sign-in"],c||d.includes(t.name)){e.next=33;break}return r("/signin"),e.abrupt("return");case 33:if(!c||!d.includes(t.name)){e.next=36;break}return"admin"===y.state.currentUser.role?r("/admin/tweets"):r("/home"),e.abrupt("return");case 36:r();case 37:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var S=P;r["a"].config.productionTip=!1,new r["a"]({router:S,store:y,render:function(e){return e(u)}}).$mount("#app")},"61ab":function(e,t,n){},"6fb9":function(e,t,n){"use strict";n("61ab")},7696:function(e,t,n){"use strict";n("b0c0");var r=n("b132");t["a"]={signIn:function(e){var t=e.account,n=e.password;return r["b"].post("/users/signin",{account:t,password:n})},signUp:function(e){var t=e.account,n=e.name,a=e.email,o=e.password,s=e.checkPassword;return r["b"].post("/users",{account:t,name:n,email:a,password:o,checkPassword:s})}}},"816f":function(e,t,n){},b132:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return p}));n("d3b7");var r=n("3d20"),a=n.n(r),o=n("5a0c"),s=n.n(o),i=n("bc3a"),c=n.n(i),u="https://simple-twitter-paul-heidi.herokuapp.com/api",l=c.a.create({baseURL:u,validateStatus:function(e){return e>=200&&e<501}});l.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var d=l,f=a.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),p={filters:{fromNow:function(e){if(!e)return"-";var t=n("4208");return s.a.extend(t),s()(e).fromNow()},absoluteTime:function(e){if(!e)return"-";var t=s()(e).hour();return t<12?s()(e).format("上午 HH:mm・YYYY年MM月DD日"):s()(e).format("下午 HH:mm・YYYY年MM月DD日")}}}},be6c:function(e,t,n){"use strict";var r=n("b132");t["a"]={getUsers:function(){return r["b"].get("/admin/users")},delete:function(e){return r["b"].delete("/admin/tweets/".concat(e))}}},bff1:function(e,t,n){"use strict";n("816f")}});
//# sourceMappingURL=app.76a6df01.js.map